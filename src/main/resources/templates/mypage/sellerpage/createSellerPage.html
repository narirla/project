<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MO:SI 판매자 마이페이지 생성</title>
  <link rel="stylesheet" th:href="@{/css/layout.css}">
  <link rel="stylesheet" th:href="@{/css/common.css}">
  <link rel="stylesheet" th:href="@{/css/sellerpage/createSellerPage.css}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretendard@1.3.8/dist/web/static/pretendard.css">
</head>

<body>
  <div class="layout-wrapper">
    <header th:replace="~{fragments/sellerHeader :: sellerHeader}"></header>

    <div class="page-container">
      <main class="mypage-container">
        <section class="content">
          <h1>판매자 페이지 생성</h1>

          <form id="sellerCreateForm" th:action="@{/mypage/seller/create}" method="post" enctype="multipart/form-data" th:object="${form}">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

            <div class="profile-section">
              <label for="imageFile" class="profile-preview-box dropzone" tabindex="0" role="button" aria-label="프로필 이미지 드래그 앤 드롭 또는 클릭하여 업로드">
                <img id="profilePreview" class="profile-preview" alt="미리보기" style="display: none;">
                <span class="profile-placeholder-text" id="placeholderText">프로필 사진 등록</span>
                <button type="button" id="removeImageBtn" class="remove-image-btn" style="display: none;"
                  aria-label="이미지 삭제">
                  <i class="fa-solid fa-xmark"></i>
                </button>
              </label>
              <input type="file" id="imageFile" name="imageFile" accept="image/*" hidden>
            </div>

            <!-- 닉네임 입력 -->
            <div>
              <label for="nickname" class="sr-only">닉네임<span class="required">*</span></label>
              <div class="nickname-box">
                <input type="text" th:field="*{nickname}" id="nickname" name="nickname" placeholder="닉네임 입력은 필수입니다."
                  autocomplete="off" required>
                <button type="button" class="btn-small" id="nicknameToggleBtn">중복확인</button>
              </div>

              <!-- ✅ 서버 유효성 검증 실패 시 메시지 -->
              <div class="error-message" th:if="${#fields.hasErrors('nickname')}" th:errors="*{nickname}"></div>

              <!-- ✅ JS 중복확인/필수값 메시지 -->
              <span id="nicknameCheckMsg" class="form-text" style="margin-left: 50px;"></span>
            </div>


            <!-- 소개글 입력 -->
            <div class="textarea-wrapper">
              <label for="intro" class="sr-only">소개글</label>
              <div class="textarea-box">
                <textarea class="intro-box" th:field="*{intro}" rows="4" maxlength="150"
                  placeholder="소개글을 입력해주세요."></textarea>
                <div id="charCount"><span id="charCountNum">0</span><span class="unit">자</span> / <span
                    class="maxCount">150자</span></div>
              </div>
            </div>
            <div>
              <button class="submit-btn" type="submit">등록</button>
            </div>
          </form>

        </section>
      </main>
      <!-- 공지 -->
      <div class="notice-bar">
        <div class="notice-label">공지</div>
        <div class="notice-text">&lt;MO:SI&gt; 신규 코스 등록 이벤트 당첨자 안내</div>
        <a href="#" class="more-link">+ 더보기</a>
      </div>

      <footer th:replace="~{fragments/footer :: footer}"></footer>
    </div>

    <script th:src="@{/js/sellerpage/createSellerPage.js}"></script>
  </div>
  <script th:src="@{/js/layout.js}"></script>
</body>

</html>